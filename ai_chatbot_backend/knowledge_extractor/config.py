# knowledge_extractor/config.py

import os
from dotenv import load_dotenv

load_dotenv() # 加载 .env 文件

# --- Neo4j 连接配置 ---
NEO4J_URI = os.getenv('NEO4J_URI', "bolt://localhost:7687")
NEO4J_USERNAME = os.getenv('NEO4J_USERNAME', "neo4j")
NEO4J_PASSWORD = os.getenv('NEO4J_PASSWORD', "your_neo4j_password") # 请替换为你的实际密码！

# --- SpaCy 中文模型名称 ---
SPACY_MODEL_NAME = "zh_core_web_sm"

# --- 知识图谱实体词典 ---
ENTITY_DICTIONARIES = {
    "COLLEGE": ["福建师范大学协和学院", "协和学院"],
    "DEPARTMENT": ["信息技术系", "经济与法学系", "管理学系", "国际教育学院", "文化产业系", "外语系", "国际商学系"],
    "MAJOR": [
        "数字媒体技术", "通信工程", "网络工程", "物联网工程", "智能科学与技术", "电子信息工程", "计算机科学与技术",
        "法学", "金融学", "投资学", "金融工程", "财务管理", "工商管理", "人力资源管理", "市场营销", "物流管理", "物业管理",
        "国际金融实验班", "国际会计实验班", "广告学", "汉语言文学", "动画", "产品设计", "音乐表演", "休闲体育", "学前教育",
        "环境设计", "日语", "英语", "商务英语", "电子商务", "国际经济与贸易", "国际商务", "会展经济与管理"
    ],
    "FEE_ITEM": ["课程修读费", "住宿费", "军训服装费", "新生入学复查体检费", "教材费", "学费"],
    "ADMISSION_TYPE": ["普通类", "体育类", "艺术类", "专升本"],
    "ADMISSION_GROUP": ["物理组", "历史组"],
    "PROVINCE": ["福建省"],
    "DORM_TYPE": ["4人间", "6人间", "河西6人间", "榕苑6人间"],
    "LOCATION": [
        "福州大学城", "师大", "工程", "华南女院", "闽江师专", "师大西门", "破街", "正荣财富广场", "永嘉天地",
        "仓山区", "鼓楼区", "台江区", "晋安区", "协和河西宿舍3号楼旁"
    ],
    "CANTEEN": [
        "和熙园餐厅", "桂苑", "翠竹园餐厅", "武夷味道小炒馆", "李苑", "美美餐厅", "文化街美食城", "千叶园餐厅",
        "溢香美食餐厅", "兰苑", "随园餐厅", "展园美食城", "榕苑", "花香园餐厅", "百草园美食城", "桃苑",
        "嘉树园餐厅", "桃李园餐厅", "桃苑美食城"
    ],
    "STUDENT_ORG": [
        "协和学院学生记者站", "协和学院院团委学生会", "协和学院协小团文化建设中心", "协和学院易班学生工作站",
        "协和学院学生纠察大队", "大学生职业能力促进会", "协和学院大学生创新创业联盟", "大学生艺术团",
        "协和学院青年志愿者协会", "汉服协会", "吉他社"
    ],
    "CERTIFICATE": [
        "注册国际投资分析师初级证书", "银行从业资格证", "证券从业资格证", "期货从业资格证", "会计从业资格证", "SQA HND证书"
    ],
    "RESOURCE": [
        "国家级重点学科", "省级文化创意人才培养模式创新实验区", "文化创意教学团队",
        "物联信息系统工程省级实验教学示范中心", "省级虚拟仿真实验中心", "福建师范大学体育科学学院",
        "福建师范大学音乐学院", "福建师范大学教育学院"
    ],
    "FACILITY": [
        "同声传译实验室", "语音实验室", "特色口语情景教室", "金融证券模拟实验室", "商业银行模拟实验室",
        "保险模拟实验室", "国贸综合实验室", "国际商务谈判实验室", "会展实验室"
    ],
    "PARTNER_COMPANY": [
        "福建省外贸集团公司", "福州海峡国际会展中心", "阿里巴巴集团", "福州创大咖科技有限公司",
        "万科物业", "三木物业", "融信物业", "华润物业"
    ],
    "COURSE": [
        "数据结构", "高级语言程序设计", "高等数学", "电路分析与模拟电子线路", "数字电子线路", "通信电子线路", "单片机技术", "数字信号处理",
        "商务会计", "商法导论", "经济学导论", "市场学导论", "人力资源管理", "财务管理", "市场营销", "物流管理", "物业管理", "刑法", "民法", "日语精读", "英语精读",
        "素描设计", "平面构成", "动画运动规律", "产品设计效果图表现技法", "环境设计基础", "休闲体育概论", "音乐表演基础", "学前教育学"
    ],
    "CORE_COMPETENCY": [
        "会计实务能力", "资本市场分析能力", "资金营运和财务风险控制能力", "调研能力", "策划能力", "销售能力", "营销管理能力",
        "物流管理基础能力", "物流业务运作及组织能力", "物流系统分析、设计和规划能力", "经营管理能力", "财务分析能力",
        "项目管理能力", "公关管理能力", "创新创业能力", "HR管理能力", "有效沟通能力", "组织协调能力", "数据分析能力",
        "企业管理能力", "物业管理能力", "房地产评估能力", "计算机运用与分析能力", "运用经济学方法分析金融活动能力",
        "处理金融业务能力", "综合判断和创新能力", "金融基础理论知识和投资分析、投资交易、企业融资和资本运作能力",
        "较强金融业务技能", "理财、投融资及风险管理方法", "熟练掌握法学各学科的基本理论和方法", "运用法律知识处理法律问题的能力",
        "撰写各种司法文书的书面写作能力和口头表达能力", "法学专业法庭辩论的技能", "获取司法考试证书", "语言基本功", "进阶语言与跨文化交际能力",
        "商务技能与实践操作能力", "扎实的语言基础", "进阶语言技能与跨文化交际能力", "商务技能与实践能力",
        "了解和掌握动画概论、动画运动规律等基本理论知识", "掌握动画造型基础、动画表现基础等绘画基础知识",
        "掌握动画制作流程中的前期、中期、后期等各个环节的制作技能",
        "了解动画行业的新发展，并能通过学习，不断吸收本专业和相关专业新的研究成果，特别是新型软件与技术的发展，拓宽专业知识，提高业务素质",
        "掌握产品设计专业相关课程的基本理论", "具有从事产品设计、产品开发等方面的基本能力", "了解国内外在产品研发和生产领域的前沿状况和发展动态",
        "掌握环境设计课程的基本理论知识，设计基础", "掌握设计操作技能的基本能力", "具备环境设计综合设计技能和整体设计能力",
        "掌握休闲体育相关学科的基本理论、基本知识", "掌握指导休闲体育、大众健身、体育旅游、体育赛事相关的运动技术与能力",
        "具有从事休闲体育活动的组织管理、咨询指导、经营开发及教学等方面的基本能力", "熟悉我国有关教育、体育工作的方针、政策和法规",
        "获得两个以上相关的社会工作或休闲体育、社会体育的职业资质证书", "掌握音乐专业相关学科课程的基本理论", "掌握音乐表演专业技能",
        "具有从事音乐艺术活动的策划、组织及教学方面的基本能力", "了解党和国家的文艺方针、政策和法规", "具有正确的儿童观与学前教育理念",
        "掌握学前教育专业相关学科知识的基本理论与专业能力", "具备环境的创设与利用、一日生活的组织与保育、游戏活动的支持与引导、教育活动的计划与实施、激励与评价、沟通与合作以及反思与发展等专业能力",
        "熟悉国家与学前教育有关的法律法规及政策规定", "较强的电子商务信息检索、分析与挖掘能力", "产品和服务的市场营销和网络营销能力",
        "电子商务系统的运行与维护能力", "电子商务项目策划与管理能力", "全面掌握会展活动组织和会展企业经营管理的理论、方法与技能",
        "会展业的策划、组织和管理的实践能力", "全方位创造性思维，较强的学习能力、创业能力和岗位适应能力",
        "扎实数理基础和电子技术基本理论和基本技能", "信息检测、分析、处理、控制等信息技术专业知识和理论", "嵌入式系统技术应用能力",
        "物联网技术应用能力", "良好网络应用系统开发与设计能力", "网络系统运行维护管理、网络安全防护、网络工程规划设计与实施能力",
        "创新意识和创新能力", "物联网电子系统硬件设计开发能力", "物联网嵌入式网络通信及应用软件开发能力",
        "硬件、软件及网络综合的系统分析与设计、独立分析问题、解决问题等创新设计与实践能力", "数理与计算机硬件基础知识",
        "扎实的程序设计基础", "人工智能应用开发与数据处理的相关技术能力", "人工智能模型服务器端、机器人端部署的相关能力",
        "应用创新意识和创新能力", "掌握数学基础知识", "掌握计算机硬件基础知识，具有基本电路的分析能力",
        "扎实的程序设计基础", "虚拟现实开发与设计的相关技术能力", "软件开发和管理的相关技术能力",
        "网络管理与安全维护的能力", "创新意识和创新能力，动手实践能力和综合应用能力"
    ],
    "CAREER_DIRECTION": [
        "财务总监(CFO)", "财务分析师(CFA)", "金融部门的财务策划师(CFP)", "注册会计师(CPA)", "注册税务师(CTA)",
        "市场营销与管理工作", "物流系统优化设计", "物流经营、管理、决策", "创业型企业家人才", "项目经理", "公共关系管理的专业人才",
        "人力资源管理师", "HR职业经理", "人力资源总监", "行政总监", "HR专家", "咨询顾问",
        "物业企业管理工作", "房地产开发、策划、评估工作", "社区服务管理",
        "金融分析师", "金融工程师", "特许财富管理师", "基金经理", "精算师", "副总裁级高管", "稽查监管人员", "产品开发人员", "后台工作人员",
        "证券投资工作", "投资中介机构", "咨询公司", "财务公司", "基金公司", "资产管理公司", "金融控股公司", "企业投资部门", "政府相关部门",
        "金融管理及教学、科研方面工作", "银行、证券公司、基金公司金融风险管理、公司理财、投资战略策划", "跨国公司和金融机构金融、财务管理、金融分析和策划工作",
        "基层法律人才", "检察机关", "审判机关", "行政机关", "企业事业单位和社会团体", "仲裁机构", "法律服务机构", "律师事务所", "警官", "检察官", "法官", "行政机关公务员", "高校、研究机构教学及法律研究工作",
        "口笔译", "旅游", "教学", "商务、旅游和翻译工作岗位", "外贸、外事、文化、教育、科研、旅游等部门商务、翻译、研究、教学、管理工作",
        "管理、宣传、主持、采访、策划、创作、编辑、校对和教学等工作", "市场调查、广告策划、文案写作、创意设计、市场营销、公关策划与实施、品牌管理、活动执行",
        "动画公司", "游戏公司", "文化传媒公司", "电视台", "影视传媒", "数字传播类的单位机构",
        "产品设计公司", "漆艺工坊", "陶瓷工坊", "家具生产设计公司", "工艺美术公司", "产品创意设计", "产品展示机构",
        "高等艺术学校环境设计或教学、研究工作", "艺术环境设计机构公共建筑室内设计", "居住空间设计", "城市环境景观与社区环境景观设计", "园林设计",
        "体育休闲娱乐业", "体育经济产业", "公共体育服务与管理", "体育健身俱乐部", "政府体育事业单位", "学校体育教育", "街道和社区文化体育机构", "企业工会", "自主性创业",
        "音乐培训机构", "影视行业", "歌舞团", "演艺机构", "电视台从事音乐表演、教学、编排、后期编辑、导演等工作",
        "幼教机构", "早教机构", "儿童产品开发公司",
        "网络规划师", "网络工程师", "售前技术工程师", "售后技术工程师", "网络管理员", "物联网系统、嵌入式系统的研发、设计、测试和运维",
        "人工智能技术研发、工程实施与管理", "软件开发", "网络技术", "系统集成与维护", "自动化控制", "多媒体技术", "计算机应用"
    ]
}

# --- 正则表达式模式 ---
REGEX_PATTERNS = {
    "YEAR": r"\b(20\d{2})级\b|\b(20\d{2})年\b|\b(\d{4})\b",
    "POLICY_DOC_ID": r"闽[发改价费]?〔\d{4}〕[费]?\d+号",
    # ✅ 重点修改：添加金额匹配，才能识别出表格里的钱
    "MONEY_AMOUNT": r"\b\d{4,5}(?:元)?\b"
}

# --- 关系关键词 ---
RELATION_KEYWORDS = {
    "OFFERS_MAJOR": ["开设", "包含", "下设", "拥有", "培养"],
    "HAS_FEE_STANDARD_FOR_YEAR_TRIGGER": ["学费", "收费"],
    "REFERENCES_DOCUMENT": ["依据", "根据", "参照"],
    "DEVELOPS_COMPETENCY": ["培养", "具有", "掌握", "提升", "发展"],
    "COVERS_COURSE": ["主要课程", "课程设置", "学习", "涵盖", "包括", "体系包括"],
    "LEADS_TO_CAREER": ["就业方向", "发展前景", "从事", "胜任", "成为"],
    "HAS_FACILITY": ["拥有", "实验室", "实训平台", "情景教室"],
    "HAS_COOPERATION_WITH": ["合作", "共建", "协同", "与...联合"],
    "UTILIZES_RESOURCE_FROM": ["依托", "利用", "母体学校", "学院"],
    "HAS_DORM_TYPE": ["宿舍"],
    "HAS_CANTEEN": ["食堂", "餐厅"],
    "HAS_STUDENT_ORGANIZATION": ["学生组织", "社团", "协会"]
}

# --- Schema 映射规则 ---
SCHEMA_MERGE_RULES = {
    "COLLEGE": "MERGE (n:College {name: $name}) ON CREATE SET n.full_name = $full_name, n.address = $address, n.website = $website, n.admissions_phone = $admissions_phone, n.description = $description ON MATCH SET n.full_name = $full_name, n.address = $address, n.website = $website, n.admissions_phone = $admissions_phone, n.description = $description",
    "DEPARTMENT": "MERGE (n:Department {name: $name})",
    "MAJOR": "MERGE (n:Major {name: $name}) ON CREATE SET n.full_name = $name, n.type = '普通专业' ON MATCH SET n.full_name = $name",
    "YEAR": "MERGE (n:Year {value: toInteger($name)})",
    "FEE_ITEM": "MERGE (n:FeeItem {name: $name})",
    "POLICY_DOC_ID": "MERGE (n:PolicyDocument {doc_id: $name})",
    "ADMISSION_TYPE": "MERGE (n:AdmissionType {name: $name})",
    "ADMISSION_GROUP": "MERGE (n:AdmissionGroup {name: $name})",
    "PROVINCE": "MERGE (n:Province {name: $name})",
    "DORM_TYPE": "MERGE (n:DormType {name: $name})",
    "LOCATION": "MERGE (n:Location {name: $name})",
    "CANTEEN": "MERGE (n:Canteen {name: $name})",
    "STUDENT_ORG": "MERGE (n:StudentOrganization {name: $name})",
    "CERTIFICATE": "MERGE (n:Certificate {name: $name})",
    "RESOURCE": "MERGE (n:Resource {name: $name})",
    "FACILITY": "MERGE (n:Facility {name: $name})",
    "PARTNER_COMPANY": "MERGE (n:PartnerCompany {name: $name})",
    "COURSE": "MERGE (n:Course {name: $name})",
    "CORE_COMPETENCY": "MERGE (n:CoreCompetency {name: $name})",
    "CAREER_DIRECTION": "MERGE (n:CareerDirection {name: $name})"
}